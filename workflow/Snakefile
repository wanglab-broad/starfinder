"""
    STARfinder Snakemake Pipeline

    This is the main entry point for the STARfinder spatial transcriptomics pipeline.
    All rules are modularized into separate .smk files in the rules/ directory.
"""

### ==================== [ Include Rule Files ] =========================

include: "rules/common.smk"
include: "rules/registration.smk"
include: "rules/spot-finding.smk"
include: "rules/segmentation.smk"
include: "rules/stitching.smk"
include: "rules/reads-assignment.smk"
include: "rules/utils.smk"

### ==================== [ Rule Order ] =========================

# Default order of rules for ambiguous output resolution
ruleorder: stitch_subtile > gr_single_fov_subtile > deep_create_subtile > deep_rsf_subtile > lrsf_single_fov_subtile > rsf_single_fov

### ==================== [ Local Rules ] =========================

localrules: rsf_preparation, create_sample_maf

### ==================== [ Main Target Rule ] =========================

rule all:
    input:
        get_overall_output
